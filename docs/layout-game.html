<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Tetris Layout (Responsive & Touch Ready)</title>
    
    <!-- Tailwind CSSの読み込み -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fontsからモダンなフォントを読み込み -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+JP&display=swap" rel="stylesheet">
    
    <!-- アイコンライブラリ (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* カスタムスタイル */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #0D1117; /* GitHubのダークモード風の背景色 */
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .font-display { font-family: 'Orbitron', sans-serif; }

        .glassmorphism {
            background: rgba(1, 22, 39, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 199, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .neon-text-cyan {
            color: #99f6e4;
            text-shadow: 0 0 5px #06b6d4, 0 0 10px #06b6d4, 0 0 15px #06b6d4;
        }
        
        #gameCanvas {
            background-color: rgba(0, 0, 0, 0.4);
            border: 2px solid #0891b2;
            box-shadow: 0 0 20px rgba(8, 145, 178, 0.5);
            width: 100%;
            height: auto;
            aspect-ratio: 1 / 2;
        }

        #nextCanvas { background-color: rgba(0, 0, 0, 0.2); }

        /* 操作ボタンのスタイル */
        .control-button {
            @apply glassmorphism rounded-full w-16 h-16 sm:w-20 sm:h-20 flex justify-center items-center text-cyan-200 transition-all duration-200;
            border-width: 2px;
            border-color: rgba(0, 199, 255, 0.3);
        }
        .control-button:active {
            background: rgba(6, 182, 212, 0.5);
            transform: scale(0.95);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.6);
        }
    </style>
</head>
<body class="text-white">

    <div class="container mx-auto p-4 min-h-screen flex flex-col justify-center items-center">

        <h1 class="font-display text-4xl sm:text-5xl md:text-6xl font-bold mb-4 md:mb-6 neon-text-cyan tracking-widest">
            TETRIS
        </h1>

        <div class="flex flex-col lg:flex-row gap-6 md:gap-8 w-full max-w-5xl">

            <!-- 情報パネル -->
            <div class="w-full lg:w-1/4 flex flex-col gap-4 order-2 lg:order-1">
                <div class="glassmorphism rounded-xl p-4">
                    <h2 class="font-display text-lg text-cyan-300 mb-3 text-center tracking-wider">NEXT</h2>
                    <div class="flex justify-center items-center h-24">
                        <canvas id="nextCanvas" width="120" height="80"></canvas>
                    </div>
                </div>
                <div class="glassmorphism rounded-xl p-4 text-center">
                    <h2 class="font-display text-lg text-cyan-300 mb-2 tracking-wider">SCORE</h2>
                    <p id="score" class="font-display text-3xl sm:text-4xl font-bold text-white">0</p>
                </div>
                <div class="flex flex-row gap-4">
                    <div class="glassmorphism rounded-xl p-4 text-center w-full">
                        <h2 class="font-display text-lg text-cyan-300 mb-2 tracking-wider">LEVEL</h2>
                        <p id="level" class="font-display text-3xl sm:text-4xl font-bold text-white">1</p>
                    </div>
                    <div class="glassmorphism rounded-xl p-4 text-center w-full">
                        <h2 class="font-display text-lg text-cyan-300 mb-2 tracking-wider">LINES</h2>
                        <p id="lines" class="font-display text-3xl sm:text-4xl font-bold text-white">0</p>
                    </div>
                </div>
            </div>

            <!-- ゲームボード -->
            <div class="w-full lg:w-auto lg:flex-1 flex justify-center items-center order-1 lg:order-2">
                <div class="w-full max-w-sm">
                    <canvas id="gameCanvas" width="300" height="600"></canvas>
                </div>
            </div>
        </div>
        
        <!-- 操作UI -->
        <div class="mt-6 w-full max-w-sm lg:max-w-5xl">
            <!-- スマホ・タブレット用タッチ操作ボタン (lg以上で非表示) -->
            <div class="lg:hidden">
                <div class="flex justify-between items-center">
                    <button id="rotate-btn" class="control-button">
                        <i data-lucide="rotate-cw" class="w-8 h-8 sm:w-10 sm:h-10"></i>
                    </button>
                    <div class="flex gap-2">
                        <button id="left-btn" class="control-button">
                            <i data-lucide="arrow-left" class="w-8 h-8 sm:w-10 sm:h-10"></i>
                        </button>
                        <button id="right-btn" class="control-button">
                            <i data-lucide="arrow-right" class="w-8 h-8 sm:w-10 sm:h-10"></i>
                        </button>
                    </div>
                </div>
                <div class="flex justify-center mt-2">
                    <button id="down-btn" class="control-button">
                        <i data-lucide="arrow-down" class="w-8 h-8 sm:w-10 sm:h-10"></i>
                    </button>
                </div>
            </div>

            <!-- PC用操作説明 (lg未満で非表示) -->
            <div class="hidden lg:block mt-4 text-center text-gray-400 text-sm">
                <p>Arrow Keys: Move | Up Arrow: Rotate | P: Pause</p>
            </div>
        </div>
    </div>

    <script>
        // アイコンの初期化
        lucide.createIcons();

        // --- 定数定義 ---
        const COLS = 10;
        const ROWS = 20;
        const BLOCK_SIZE = 300 / COLS; 
        const NEXT_COLS = 4;
        const NEXT_ROWS = 2;
        const NEXT_BLOCK_SIZE = 120 / NEXT_COLS;

        // --- キャンバスの準備 ---
        const gameCanvas = document.getElementById('gameCanvas');
        const gameCtx = gameCanvas.getContext('2d');
        gameCanvas.width = 300;
        gameCanvas.height = 600;

        const nextCanvas = document.getElementById('nextCanvas');
        const nextCtx = nextCanvas.getContext('2d');
        nextCanvas.width = 120;
        nextCanvas.height = 80;

        // --- 操作ボタンの取得 ---
        const rotateBtn = document.getElementById('rotate-btn');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const downBtn = document.getElementById('down-btn');

        // --- ボタンのクリックイベント（デモ用） ---
        // 実際のゲームロジックに置き換えてください
        rotateBtn.addEventListener('click', () => console.log('Rotate'));
        leftBtn.addEventListener('click', () => console.log('Move Left'));
        rightBtn.addEventListener('click', () => console.log('Move Right'));
        downBtn.addEventListener('click', () => console.log('Move Down'));


        // --- 色の定義 ---
        const COLORS = {
            I: '#00f0f0', T: '#a000f0', O: '#f0f000', 
            L: '#f0a000', J: '#0000f0', S: '#00f000', Z: '#f00000',
        };

        // --- 描画関数 ---
        function drawBlock(ctx, x, y, color, blockSize) {
            ctx.fillStyle = color;
            ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.lineWidth = 2;
            ctx.strokeRect(x * blockSize + 1, y * blockSize + 1, blockSize - 2, blockSize - 2);
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.fillRect(x * blockSize + 2, y * blockSize + 2, blockSize - 4, blockSize - 4);
        }

        function drawGrid(ctx) {
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let c = 1; c < COLS; c++) {
                ctx.beginPath();
                ctx.moveTo(c * BLOCK_SIZE, 0);
                ctx.lineTo(c * BLOCK_SIZE, ctx.canvas.height);
                ctx.stroke();
            }
            for (let r = 1; r < ROWS; r++) {
                ctx.beginPath();
                ctx.moveTo(0, r * BLOCK_SIZE);
                ctx.lineTo(ctx.canvas.width, r * BLOCK_SIZE);
                ctx.stroke();
            }
        }

        function drawDemoBoard() {
            gameCtx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            drawGrid(gameCtx);
            drawBlock(gameCtx, 2, 18, COLORS.J, BLOCK_SIZE);
            drawBlock(gameCtx, 2, 19, COLORS.J, BLOCK_SIZE);
            drawBlock(gameCtx, 1, 19, COLORS.J, BLOCK_SIZE);
            drawBlock(gameCtx, 0, 19, COLORS.J, BLOCK_SIZE);
            drawBlock(gameCtx, 9, 19, COLORS.O, BLOCK_SIZE);
            drawBlock(gameCtx, 8, 19, COLORS.O, BLOCK_SIZE);
            drawBlock(gameCtx, 9, 18, COLORS.O, BLOCK_SIZE);
            drawBlock(gameCtx, 8, 18, COLORS.O, BLOCK_SIZE);
        }

        function drawDemoNext() {
            nextCtx.clearRect(0, 0, nextCanvas.width, nextCanvas.height);
            const piece = [ [0, 1, 0], [1, 1, 1] ];
            const color = COLORS.T;
            const offsetX = 0.5;
            const offsetY = 0;
            piece.forEach((row, y) => {
                row.forEach((value, x) => {
                    if (value) {
                        drawBlock(nextCtx, x + offsetX, y + offsetY, color, NEXT_BLOCK_SIZE);
                    }
                });
            });
        }

        // --- 初期化処理 ---
        window.onload = () => {
            drawDemoBoard();
            drawDemoNext();
        };
    </script>
</body>
</html>

